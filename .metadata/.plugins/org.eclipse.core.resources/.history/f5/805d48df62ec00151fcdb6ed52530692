import java.util.*;
public class Solution {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		int[] input = {2,3,1};
		System.out.println(verifyPreorder(input));
	}
    public static boolean verifyPreorder(int[] preorder) {
        if(preorder.length==0){
            return true;
        }
        else{
            Stack<Integer> data = new Stack<Integer>();
            boolean result = true;
            int root = Integer.MIN_VALUE;
            for(int i = 0; i<preorder.length; i++){
                if(data.isEmpty()==true){
                    data.add(preorder[i]);
                }
                else{
                    int count = 0;
                    while(data.isEmpty()==false&&data.peek()<preorder[i]){
                        root=data.pop();
                        count++;
                    }
                    if(count==0){
                        if(preorder[i]<=root){
                            result = false;
                            break;
                        }
                    }
                    data.push(preorder[i]);
                }
            }
            return result;
        }
    }
}
